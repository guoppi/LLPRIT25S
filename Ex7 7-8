using System;

namespace Ex6
{
    class Program
    {
        static void Main(string[] args)
        {
            // Tehtävä 7: Laske keskiarvo yhdestä luvusta tai luvuista
            Console.WriteLine("Tehtävä 7: Laske keskiarvo syöttämällä positiivisia lukuja.");
            Console.WriteLine("Syötä negatiivinen luku lopettaaksesi.");

            double summa = 0;       // Muuttuja lukujen summalle
            int lukumaara = 0;      // Muuttuja lukujen määrälle

            // Silmukka, joka pyytää lukuja kunnes negatiivinen luku syötetään
            while (true)
            {
                Console.Write("Syötä luku: "); // Kehotus käyttäjälle
                string syote = Console.ReadLine(); // Luetaan käyttäjän syöte

                try // Perustelut alhaalla, eli try-catch metodi
                {
                    double luku = double.Parse(syote); // Muutetaan syöte luvuksi

                    if (luku < 0) // Jos luku on negatiivinen, lopetetaan
                        break;

                    summa += luku;     // Lisätään luku summaan
                    lukumaara++;       // Kasvatetaan lukumäärää
                }
                catch // estää ohjelman kaatumisesta etenkin kun ei käytä TryParse, toki voi tehä sit Try.Parse :lla mut sit koodi on hieman erilainen.
                // Eli toisin sanoien TryParse ei kaadu virheellisestä syötteestä, mutta Parse kaatuu, ellei sitä suojata try-catch-rakenteella.
                {
                    Console.WriteLine("Virheellinen syöte, yritä uudelleen."); // Jos syöte ei ole luku
                }
            }

            // Lasketaan ja näytetään keskiarvo, jos lukuja on annettu
            if (lukumaara > 0)
            {
                double keskiarvo = summa / lukumaara;
                Console.WriteLine($"Keskiarvo on {keskiarvo:F3}"); // Tulostetaan keskiarvo kolmella desimaalilla
            }
            else
            {
                Console.WriteLine("Et syöttänyt yhtään positiivista lukua."); // Jos lukuja ei ollut
            }

            Console.WriteLine(); // Tyhjä rivi selkeyden vuoksi

            // Tehtävä 8: Mahdollisuus laskea uusia keskiarvoja
            while (true)
            {
                Console.Write("Haluatko laskea uuden keskiarvon? (Yes/No): "); // Kysytään käyttäjältä
                string vastaus = Console.ReadLine(); // Luetaan vastaus

                if (vastaus.ToLower() == "no") // Jos vastaus on "no", lopetetaan ohjelma
                {
                    Console.WriteLine("Ohjelma lopetetaan.");
                    break;
                }

                if (vastaus.ToLower() == "yes") // Jos vastaus on "yes", aloitetaan uusi keskiarvolasku
                {
                    summa = 0;       // Nollataan summa (ei tarvitsi määritellä muuttujaa esim summa1 koska ( = 0; on sama kun alustaminen eli voidaan käyttää seuraavassa komennossa ilman määritystä esim "int summa")
                    lukumaara = 0;   // Nollataan lukumäärä

                    Console.WriteLine("Syötä positiivisia lukuja. Negatiivinen luku lopettaa.");

                    while (true)
                    {
                        Console.Write("Syötä luku: ");
                        string syote = Console.ReadLine();

                        try
                        {
                            double luku = double.Parse(syote);

                            if (luku < 0)
                                break;

                            summa += luku;
                            lukumaara++;
                        }
                        catch
                        {
                            Console.WriteLine("Virheellinen syöte, yritä uudelleen.");
                        }
                    }

                    if (lukumaara > 0)
                    {
                        double keskiarvo = summa / lukumaara;
                        Console.WriteLine($"Keskiarvo on {keskiarvo:F3}");
                    }
                    else
                    {
                        Console.WriteLine("Et syöttänyt yhtään positiivista lukua.");
                    }

                    Console.WriteLine(); // Tyhjä rivi selkeyden vuoksi
                }
                else
                {
                    Console.WriteLine("Vastaa Yes tai No."); // Jos vastaus ei ole kumpikaan
                }
            }
        }
    }
}
